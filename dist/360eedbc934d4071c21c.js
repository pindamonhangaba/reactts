(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(0),o=n(18),a=n(204),i=n(207),l=n(86),c=Object(a.hot)(e)((function(){return r.createElement(r.Fragment,null,r.createElement(o.c,null,r.createElement(o.a,{path:"/",component:i.a})),r.createElement(l.b,null))}))}).call(this,n(127)(e))},207:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"ColumnTypesSel",(function(){return ee})),n.d(r,"ColumnEditorModel",(function(){return te})),n.d(r,"FKEditorModel",(function(){return ne}));var o,a=n(0),i=n.n(a),l=n(17),c=n(6),u=function(e){var t=e.size,n=void 0===t?32:t,r=e.style,o=void 0===r?{}:r;return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32",version:"1.1",width:n,height:n,style:o},i.a.createElement("g",{id:"surface1"},i.a.createElement("path",{d:"M 5 5 L 5 27 L 27 27 L 27 5 Z M 7 7 L 12 7 L 12 12 L 7 12 Z M 14 7 L 18 7 L 18 12 L 14 12 Z M 20 7 L 25 7 L 25 12 L 20 12 Z M 7 14 L 12 14 L 12 18 L 7 18 Z M 14 14 L 18 14 L 18 18 L 14 18 Z M 20 14 L 25 14 L 25 18 L 20 18 Z M 7 20 L 12 20 L 12 25 L 7 25 Z M 14 20 L 18 20 L 18 25 L 14 25 Z M 20 20 L 25 20 L 25 25 L 20 25 Z "})))},s=function(e){var t=e.size,n=void 0===t?32:t,r=e.style,o=void 0===r?{}:r;return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32",version:"1.1",width:n,height:n,style:o},i.a.createElement("g",{id:"surface1"},i.a.createElement("path",{d:"M 19 3 C 13.488281 3 9 7.488281 9 13 C 9 15.394531 9.839844 17.589844 11.25 19.3125 L 3.28125 27.28125 L 4.71875 28.71875 L 12.6875 20.75 C 14.410156 22.160156 16.605469 23 19 23 C 24.511719 23 29 18.511719 29 13 C 29 7.488281 24.511719 3 19 3 Z M 19 5 C 23.429688 5 27 8.570313 27 13 C 27 17.429688 23.429688 21 19 21 C 14.570313 21 11 17.429688 11 13 C 11 8.570313 14.570313 5 19 5 Z "})))},p=n(86),f=n(50),d=n.n(f),h={userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none"},y=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(){return(m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeTab:t.props.defaultActive},t}return y(t,e),t.prototype.setTab=function(e){this.setState({activeTab:e})},t.prototype.render=function(){var e=this.state.activeTab,t=this.props.tabs,n=t.map((function(t,n){var r="Tabs-tabInner",o=t.id===e;return o&&(r+=" is-active"),i.a.createElement("li",{key:n,style:{border:"1px solid #d9d9d9",borderLeft:n>0?"none":"1px solid #d9d9d9",borderBottom:"none"}},i.a.createElement(d.a.Tab,{id:t.id,active:o},i.a.createElement("div",{className:r,style:{display:"inline",borderBottom:o?"1px solid #fff":"none",padding:"1px 0.5em",backgroundColor:o?"#fff":"transparent",cursor:"pointer"}},t.title)))})),r=t.map((function(t,n){return i.a.createElement(d.a.TabPanel,{key:n,tabId:t.id,active:t.id===e},t.content)}));return i.a.createElement(d.a.Wrapper,{onChange:this.setTab.bind(this),activeTabId:this.state.activeTab},i.a.createElement(d.a.TabList,null,i.a.createElement("ul",{style:m({display:"flex",listStyleType:"none",padding:0,margin:0,borderBottom:"1px solid #d9d9d9"},h)},n)),i.a.createElement("div",{style:{backgroundColor:"#fff",border:"1px solid #d9d9d9",borderTop:"none",padding:5}},r))},t}(i.a.Component),b=n(202),g=n.n(b),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function C(e){var t=e.children,n=e.initialFocusId,r=e.titleText,o=e.getApplicationNode,a=void 0===o?function(){return null}:o,l=e.onClose;return i.a.createElement(g.a,{titleText:r,onExit:l,initialFocus:n,getApplicationNode:a,underlayStyle:{paddingTop:"2em"},underlayColor:"rgba(0,0,0,0)"},i.a.createElement("div",{style:{boxShadow:"0px 0px 5px 1px rgba(0,0,0,0.15)",border:"1px solid #707070"}},i.a.createElement("header",{style:O({display:"flex",flexDirection:"row",justifyContent:"flex-end",backgroundColor:"#fff"},h)},i.a.createElement("h4",{style:{flex:10,margin:5}},r),i.a.createElement("button",{style:{flexGrow:0,flexBasis:1,backgroundColor:"transparent",border:"none"},onClick:l},"âœ–")),i.a.createElement("div",{style:{backgroundColor:"#f0f0f0",margin:0}},t)))}var w,x,E=n(44),P=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=i.a.createRef(),t}return P(t,e),t.prototype.getName=function(){return this.props.index+"--"+this.props.colKey},t.prototype.componentDidMount=function(){this.shouldFocus()},t.prototype.focus=function(e){this.ref.current&&this.ref.current.focus()},t.prototype.shouldFocus=function(){this.props.focused&&this.focus()},t.prototype.render=function(){var e=this.props,t=e.component,n=e.focused,r=e.children,o=j(e,["component","focused","children"]);return i.a.createElement(t,_({ref:this.ref,focused:n,tabIndex:n?0:-1},o),r)},t}(i.a.Component),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(){return(L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},M=function(e){return i.a.createElement("tr",L({},e))},R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={focused:[0,0]},t.ref=i.a.createRef(),t.cellRefs=[],t.handleChangeAccept=function(e,n){t.props.onChange&&t.props.onChange({row:e[0],col:e[1],val:n})},t.handleCellClick=function(e,n){t.focusCoord([-1,-1],e)},t.handleBlur=function(e,n){t.props.keepFocus||setTimeout((function(){t.ref.current&&!t.ref.current.contains(document.activeElement)&&t.focusCoord([-1,-1],e)}),100)},t.handleMouseDown=function(e,n){var r=t.props,o=r.columns,a=r.data,i=r.onOutOfBounds,l=e[0],c=e[1];switch(n.keyCode){case 37:l-=1;break;case 39:l+=1;break;case 40:c+=1;break;case 38:c-=1;break;default:return}c>a.length-1||c<0||l>o.length-1||l<0?i&&i([l,c]):t.focusCoord(e,[l,c])},t}return S(t,e),t.prototype.setFocused=function(e){this.focusCoord(this.state.focused,e)},t.prototype.focusCoord=function(e,t){var n=this,r=this.props,o=r.columns,a=r.onFocusChange;this.setState({focused:t},(function(){var t=n.state.focused,r=n.cellRefs[t[1]*(o||[]).length+t[0]];r&&r.focus&&r.focus(t),a&&a(e,t,o[t[0]].key)}))},t.prototype.render=function(){var e=this,t=this.props,n=t.id,r=t.title,o=t.columns,a=t.data,l=t.rowRenderer,c=this.state.focused,u=l||M;return i.a.createElement("table",{role:"grid","aria-labelledby":n,ref:this.ref},i.a.createElement("caption",{id:n},r),i.a.createElement("thead",null,i.a.createElement("tr",null,o.map((function(e){return i.a.createElement("th",{key:e.key},e.label)})))),i.a.createElement("tbody",{style:{MozUserSelect:"none"}},a.map((function(t,n){return i.a.createElement(u,{key:n,row:t,rowIndex:n},o.map((function(r,a){return i.a.createElement(k,L({},r.cellProps||{},{key:r.key+n,component:r.renderer||"td",onClick:e.handleCellClick.bind(e,[a,n]),onKeyDown:e.handleMouseDown.bind(e,[a,n]),onBlur:e.handleBlur.bind(e,[a,n]),onChangeAccept:e.handleChangeAccept.bind(e,[n,r.key]),colKey:r.key,index:n,row:t,focused:c[0]===a&&c[1]===n,style:L(L({},r.style),{width:r.width||200}),className:c[0]===a&&c[1]===n&&"active",ref:function(t){e.cellRefs[n*(o||[]).length+a]=t}}),t[r.key])})))}))))},t}(i.a.Component),D=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=i.a.createRef(),t.inputRef=i.a.createRef(),t.state={editing:!1,value:t.props.row[t.props.colKey]},t.handleKeyDown=function(e){switch(e.keyCode){case 13:e.preventDefault(),e.stopPropagation(),t.setState({editing:!t.state.editing},t.focus),t.state.editing&&t.props.onChangeAccept&&t.props.onChangeAccept(t.state.value);break;case 27:e.preventDefault(),e.stopPropagation(),t.setState({editing:!1},t.focus);break;default:e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90||e.keyCode>=96&&e.keyCode<=105?t.state.editing||t.setState({editing:!0},(function(){t.focus(),t.select()})):t.props.onKeyDown(e)}},t.handleDoubleClick=function(){t.state.editing||t.setState({editing:!0},(function(){t.focus(),t.select()}))},t.handleBlur=function(e){e.preventDefault(),e.stopPropagation(),t.setState({editing:!1},t.focus),t.state.editing&&t.props.onChangeAccept&&t.props.onChangeAccept(t.state.value)},t.handleChange=function(e){e.preventDefault(),e.stopPropagation(),t.setState({value:e.target.value},t.focus)},t}return D(t,e),t.prototype.focus=function(){this.state.editing&&this.inputRef.current?this.inputRef.current.focus():this.ref.current&&this.ref.current.focus()},t.prototype.select=function(){this.state.editing&&this.inputRef.current&&this.inputRef.current.select()},t.prototype.render=function(){var e=this.props,t=e.colKey,n=e.row,r=this.state,o=r.value,a=r.editing,l=n[t];return a&&(l=i.a.createElement("input",{ref:this.inputRef,style:{width:"100%"},onBlur:this.handleBlur,value:o,onChange:this.handleChange})),i.a.createElement("td",A({},this.props,{onKeyDown:this.handleKeyDown,onDoubleClick:this.handleDoubleClick,ref:this.ref}),l)},t}(i.a.Component),F=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(){return(N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},I={margin:0,height:20,padding:0},U={container:function(e){return N(N(N({},e),I),{width:"100%"})},valueContainer:function(e){return N(N({},e),I)},control:function(e){return N(N({display:"flex"},I),{flex:1,flexDirection:"row"})},dropdownIndicator:function(e){return{padding:0,background:"#cecece"}},indicatorSeparator:function(e){return{display:"none"}}},K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=i.a.createRef(),t.inputRef=i.a.createRef(),t.state={editing:!1,value:t.props.row[t.props.colKey]},t.handleKeyDown=function(e){var n=e.keyCode;switch(n){case 13:e.preventDefault(),e.stopPropagation(),t.setState({editing:!t.state.editing},t.focus);break;case 27:e.preventDefault(),e.stopPropagation(),t.setState({editing:!1},t.focus);break;default:if(t.state.editing&&n>=37&&n<=40)return;n>=48&&n<=57||n>=65&&n<=90||n>=96&&n<=105?t.setState({editing:!0},t.focus):t.props.onKeyDown(e)}},t.handleDoubleClick=function(){t.state.editing||t.setState({editing:!0},t.focus)},t.handleBlur=function(){var e,n;if(t.setState({editing:!1},t.focus),t.state.editing){var r="value"in t.state.value?t.state.value.value:t.state.value.map((function(e){return e.value}));null===(n=(e=t.props).onChangeAccept)||void 0===n||n.call(e,r)}},t.handleChange=function(e){t.setState({value:"object"==typeof e?e.value:e},t.focus)},t.handleSelectChange=function(e){var n,r,o="value"in e?e.value:e.map((function(e){return e.value}));null===(r=(n=t.props).onChangeAccept)||void 0===r||r.call(n,o),t.setState({value:e})},t}return F(t,e),t.prototype.focus=function(){this.state.editing&&this.inputRef.current?this.inputRef.current.focus():this.ref.current&&this.ref.current.focus()},t.prototype.render=function(){var e=this.props,t=e.colKey,n=e.row,r=e.focused,o=e.options,a=e.multiple,l=this.state,c=l.value,u=l.editing,s=n[t];return u&&(s=i.a.createElement(E.a,{ref:this.inputRef,options:o||[],value:c,onChange:this.handleSelectChange,formatCreateLabel:function(){return null},placeholder:"...",tabIndex:r&&u?0:-1,styles:U,isMulti:a,closeMenuOnSelect:!1,components:{ClearIndicator:null}})),i.a.createElement("td",N({},this.props,{onKeyDown:this.handleKeyDown,ref:this.ref,onDoubleClick:this.handleDoubleClick,tabIndex:r&&!this.state.editing?0:-1})," ",s)},t}(i.a.Component),B=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(){return(X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=i.a.createRef(),t.inputRef=i.a.createRef(),t.state={editing:!1,value:!!t.props.row[t.props.colKey]},t.handleKeyUp=function(e){switch(e.preventDefault(),e.stopPropagation(),e.keyCode){case 32:t.toggle()}},t.handleCellClick=function(e){t.toggle(),t.props.onClick&&t.props.onClick(e)},t.toggle=function(){var e=t.props,n=e.colKey,r=e.row[n];t.props.onChangeAccept&&t.props.onChangeAccept(!r)},t}return B(t,e),t.prototype.focus=function(){this.inputRef.current&&this.inputRef.current.focus()},t.prototype.render=function(){var e=this.props,t=e.colKey,n=e.row,r=e.tabIndex,o=n[t];return o=i.a.createElement("label",null,i.a.createElement("input",{tabIndex:r,type:"checkbox",ref:this.inputRef,checked:!!o}),o),i.a.createElement("td",X({},this.props,{onKeyUp:this.handleKeyUp,onClick:this.handleCellClick,tabIndex:-1,ref:this.ref}),o)},t}(i.a.Component);!function(e){e.Restrict="RESTRICT",e.NoAction="NO ACTION",e.Cascade="CASCADE",e.SetNull="SET NULL",e.SetDefault="SET DEFAULT"}(w||(w={})),function(e){e.Full="MATCH FULL",e.Partial="MATCH PARTIAL",e.Simple="MATCH SIMPLE"}(x||(x={}));var H=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z=function(){return(z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},W=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=i.a.createRef(),t}return H(t,e),t.prototype.focus=function(){this.ref.current&&this.ref.current.focus()},t.prototype.render=function(){return i.a.createElement(K,z({ref:this.ref,multiple:!0},this.props))},t}(i.a.Component),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=i.a.createRef(),t}return H(t,e),t.prototype.focus=function(){this.ref.current&&this.ref.current.focus()},t.prototype.render=function(){var e=this.props,t=e.options,n=e.index,r=W(e,["options","index"]);return i.a.createElement(K,z({ref:this.ref,multiple:!0},r,{options:t(n)}))},t}(i.a.Component),Q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(){return(J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},V=["varchar","time","timestamp","date","int8","int2","jsonb","json"].map((function(e){return{value:e,label:e}})),q=[w.Cascade,w.NoAction,w.Restrict,w.SetDefault,w.SetNull].map((function(e){return{value:e,label:e}})),$=[x.Full,x.Partial,x.Simple].map((function(e){return{value:e,label:e}})),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=i.a.createRef(),t}return Q(t,e),t.prototype.focus=function(){this.ref.current&&this.ref.current.focus()},t.prototype.render=function(){return i.a.createElement(K,J({ref:this.ref},this.props,{options:V,component:this.props.component}))},t}(i.a.Component),te={columns:[{key:"name",label:"Name",renderer:T},{key:"type",label:"Type",renderer:K,cellProps:{options:V}},{key:"length",label:"Length",renderer:T},{key:"decimals",label:"Decimals",renderer:T},{key:"nonNull",label:"Non null",renderer:Y},{key:"pk",label:"PK",renderer:Y}],typeDefaults:{default:[{value:"NULL",label:"NULL"},{value:"",label:"Empty string"}]}},ne={columns:[{key:"name",label:"Name",renderer:T},{key:"columns",label:"Columns",renderer:Z,cellProps:{options:[],multiple:!0}},{key:"schemaRef",label:"Schema",renderer:T},{key:"tableRef",label:"Referenced table",renderer:Z,cellProps:{options:[]}},{key:"columnsRef",label:"Referenced columns",renderer:G,cellProps:{options:function(){return[]},multiple:!0}},{key:"onUpdate",label:"On update",renderer:K,cellProps:{options:q}},{key:"onDelete",label:"On delete",renderer:K,cellProps:{options:q}}],typeDefaults:{match:$}},re=r,oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ae=function(){return(ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ie=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r},le=function(e){function t(){var t,n,r,o,a,l=e.apply(this,arguments)||this;return l.state={data:(null===(n=null===(t=l.props.value)||void 0===t?void 0:t.columns)||void 0===n?void 0:n.length)?null===(r=l.props.value)||void 0===r?void 0:r.columns:[{}],currentFocus:[0,0],metadata:(a=null===(o=l.props.value)||void 0===o?void 0:o.metadata,null!=a?a:[])},l.ref=i.a.createRef(),l.handleAddRow=function(e){var t=l.state.data,n=t.length;n>0&&e[1]>=n&&Object.entries(t[n-1]||{}).length>0&&(l.setState({data:ie(t,[{}])},(function(){return l.updateParent()})),l.ref.current&&l.ref.current.setFocused(e))},l.handleFocusChange=function(e,t){l.setState({currentFocus:t})},l.handleClickAddRow=function(){var e=l.state.data,t=e.length;0!==t&&0==Object.entries(e[t-1]||{}).length||l.setState({data:ie(e,[{}])},(function(){return l.updateParent()}))},l.handleClickRemoveRow=function(){var e=l.state,t=e.data,n=e.currentFocus;t.length<=1||(t.splice(n[1],1),n[1]>t.length-1&&(n[1]=t.length-1),l.setState({data:ie(t),currentFocus:n},(function(){l.updateParent(),l.ref.current&&l.ref.current.setFocused(n)})))},l.handleMoveUp=function(){var e=l.state,t=e.data,n=e.currentFocus;if(!(n[1]<=0)){var r=t[n[1]],o=ie(t);o.splice(n[1],1),o.splice(--n[1],0,r),l.setState({data:o,currentFocus:n},(function(){l.updateParent(),l.ref.current&&l.ref.current.setFocused(n)}))}},l.handleMoveDown=function(){var e=l.state,t=e.data,n=e.currentFocus;if(!(n[1]>=t.length-1)){var r=t[n[1]],o=ie(t);o.splice(n[1],1),o.splice(++n[1],0,r),l.setState({data:o,currentFocus:n},(function(){l.updateParent(),l.ref.current&&l.ref.current.setFocused(n)}))}},l.handleChange=function(e){var t=ie(l.state.data),n=e.val,r=t[e.row].pk||0;if("pk"===e.col){var o=0;t.map((function(e){var t=e.pk||0;return o+=t?1:0,t>r&&r&&(n?t+=1:t-=1),e.pk=t||"",e})),n=n?o+1:""}t[e.row][e.col]=n,l.setState({data:t},(function(){return l.updateParent()}))},l.handleMetaChange=function(e,t){var n=l.state.currentFocus[1],r=l.state.metadata[n]||{};r[e]=t;var o=ae({},l.state.metadata);o[n]=r,l.setState({metadata:o},(function(){l.updateParent()}))},l}return oe(t,e),t.prototype.updateParent=function(){var e=this.props.onChange,t=void 0===e?function(e){}:e,n=this.state;t({columns:n.data,metadata:n.metadata})},t.prototype.render=function(){var e=this,t=this.state,n=t.currentFocus,r=t.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("button",{onClick:this.handleClickAddRow},"Add column"),i.a.createElement("button",{onClick:this.handleClickRemoveRow},"Remove column"),i.a.createElement("button",{onClick:this.handleMoveUp},"Move up â†‘"),i.a.createElement("button",{onClick:this.handleMoveDown},"Move down â†“")),i.a.createElement(R,{ref:this.ref,id:"test2",title:"teboru",columns:re.ColumnEditorModel.columns,data:this.state.data,onChange:this.handleChange,onOutOfBounds:this.handleAddRow,onFocusChange:this.handleFocusChange,keepFocus:!0}),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement("div",{style:{flex:2}},"Default:"),i.a.createElement("div",{style:{flex:8}},i.a.createElement(E.a,{options:r.length&&re.ColumnEditorModel.typeDefaults[r[n[1]].type]||re.ColumnEditorModel.typeDefaults.default,value:(this.state.metadata[n[1]]||{default:""}).default,onChange:this.handleMetaChange.bind(this,"default"),formatCreateLabel:function(){return null}}))),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement("div",{style:{flex:2}},"Comment:"),i.a.createElement("div",{style:{flex:8}},i.a.createElement("textarea",{rows:1,value:(this.state.metadata[n[1]]||{comment:""}).comment,onChange:function(t){return e.handleMetaChange("comment",t.target.value)}}))),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement("div",{style:{flex:2}},"Dimensions:"),i.a.createElement("div",{style:{flex:8}},i.a.createElement("input",{type:"number",value:(this.state.metadata[n[1]]||{dimensions:""}).dimensions,onChange:function(t){return e.handleMetaChange("dimensions",t.target.value)}}))))},t}(i.a.Component),ce=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ue=function(){return(ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},se=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r},pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={data:(t.props.value||{entries:[]}).entries||[{}],currentFocus:[0,0],metadata:(t.props.value||{metadata:[]}).metadata||[]},t.ref=i.a.createRef(),t.handleAddRow=function(e){var n=t.state.data,r=n.length;e[1]>=r&&Object.entries(n[r-1]).length>0&&(t.setState({data:se(n,[{}])},(function(){return t.updateParent()})),t.ref.current&&t.ref.current.setFocused(e))},t.handleFocusChange=function(e,n){t.setState({currentFocus:n})},t.handleClickAddRow=function(){var e=t.state.data;0!=Object.entries(e[e.length-1]).length&&t.setState({data:se(e,[{}])},(function(){return t.updateParent()}))},t.handleClickRemoveRow=function(){var e=t.state,n=e.data,r=e.currentFocus;n.length<=1||(n.splice(r[1],1),r[1]>n.length-1&&(r[1]=n.length-1),t.setState({data:se(n),currentFocus:r},(function(){t.updateParent(),t.ref.current&&t.ref.current.setFocused(r)})))},t.handleMoveUp=function(){var e=t.state,n=e.data,r=e.currentFocus;if(!(r[1]<=0)){var o=n[r[1]],a=se(n);a.splice(r[1],1),a.splice(--r[1],0,o),t.setState({data:a,currentFocus:r},(function(){t.updateParent(),t.ref.current&&t.ref.current.setFocused(r)}))}},t.handleMoveDown=function(){var e=t.state,n=e.data,r=e.currentFocus;if(!(r[1]>=n.length-1)){var o=n[r[1]],a=se(n);a.splice(r[1],1),a.splice(++r[1],0,o),t.setState({data:a,currentFocus:r},(function(){t.updateParent(),t.ref.current&&t.ref.current.setFocused(r)}))}},t.handleChange=function(e){var n=se(t.state.data),r=e.val;n[e.row][e.col]=r,t.setState({data:n},(function(){return t.updateParent()}))},t.handleMetaChange=function(e,n){var r=t.state.currentFocus[1],o=t.state.metadata[r]||{};o[e]=n;var a=ue({},t.state.metadata);a[r]=o,t.setState({metadata:a},(function(){return t.updateParent()}))},t}return ce(t,e),t.prototype.updateParent=function(){var e=this.props.onChange,t=void 0===e?function(e){}:e,n=this.state,r=n.data,o=void 0===r?[]:r,a=n.metadata;t({entries:o,metadata:void 0===a?{}:a})},t.prototype.mergedAvailabeOptions=function(){var e=this.props,t=e.availableColumns,n=void 0===t?[]:t,r=e.availableTables,o=void 0===r?[]:r,a=e.availableTableColumns,i=void 0===a?{}:a,l=this.state.data,c=re.FKEditorModel.columns;return c[1].cellProps.options=n.map((function(e){return{value:e,label:e}})),c[3].cellProps.options=o.map((function(e){return{value:e,label:e}})),c[4].cellProps.options=function(e){return(i[(l[e]||[])[c[3].key]]||[]).map((function(e){return{value:e,label:e}}))},c},t.prototype.render=function(){var e=this,t=this.state,n=t.currentFocus,r=t.data,o=this.mergedAvailabeOptions();return i.a.createElement(i.a.Fragment,null,i.a.createElement(R,{ref:this.ref,id:"fktable",title:"Foreign keys",columns:o,data:r,onChange:this.handleChange,onOutOfBounds:this.handleAddRow,onFocusChange:this.handleFocusChange,keepFocus:!0}),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement("div",{style:{flex:2}},"Match:"),i.a.createElement("div",{style:{flex:8}},i.a.createElement(E.a,{options:re.FKEditorModel.typeDefaults.match,value:(this.state.metadata[n[1]]||{match:""}).match,onChange:this.handleMetaChange.bind(this,"match"),formatCreateLabel:function(){return null}}))),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement("div",{style:{flex:2}},"Comment:"),i.a.createElement("div",{style:{flex:8}},i.a.createElement("textarea",{rows:1,value:(this.state.metadata[n[1]]||{comment:""}).comment,onChange:function(t){return e.handleMetaChange("comment",t.target.value)}}))),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement("label",{htmlFor:"deferrable"},"deferrable"),i.a.createElement("input",{id:"deferrable",type:"checkbox",value:"deferrable",checked:(this.state.metadata[n[1]]||{deferrable:""}).deferrable,onChange:function(t){return e.handleMetaChange("deferrable",!!t.target.checked)}})),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement("label",{htmlFor:"deferred"},"Defferred"),i.a.createElement("input",{id:"deferred",type:"checkbox",value:"checkbox",checked:(this.state.metadata[n[1]]||{deferred:""}).deferred,onChange:function(t){return e.handleMetaChange("deferred",!!t.target.checked)}})))},t}(i.a.Component),fe=Object(l.b)(c.f,(function(){return{}}))(pe),de=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),he=function(){return(he=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ye=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r},me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=he({tableData:{columns:[],metadata:{}},tableName:t.props.tableName,fkData:{}},t.props.initialValues?ge(t.props.initialValues):{}),t.handleTableDataChange=function(e){t.setState({tableData:e})},t.handleFKDataChange=function(e){t.setState({fkData:e})},t.handleTableNameChange=function(e){t.setState({tableName:e.target.value})},t.handleAccept=function(){(0,t.props.close)(be(t.state))},t.handleCancel=function(){(0,t.props.close)()},t}return de(t,e),t.prototype.render=function(){var e=this.props.open,t=this.state,n=t.tableName,r=t.tableData,o=t.fkData,i=[{title:"Columns",id:"t1",content:a.createElement("div",null,a.createElement(le,{value:r,onChange:this.handleTableDataChange}))},{title:"Foreign keys",id:"t2",content:a.createElement("div",null,a.createElement(fe,{value:o,onChange:this.handleFKDataChange,availableColumns:r.columns.map((function(e){return e.name}))}))}];return e&&a.createElement(C,{titleText:"Table editor",onClose:this.handleCancel},a.createElement("div",{style:{padding:5,minHeight:450,display:"flex",justifyContent:"space-between",flexDirection:"column"}},a.createElement("input",{type:"text",value:n,onChange:this.handleTableNameChange}),a.createElement(v,{tabs:i,defaultActive:"t1"}),a.createElement("footer",{style:{display:"flex",justifyContent:"flex-end",marginTop:5,alignSelf:"flex-end",flexGrow:0,flexBasis:1}},a.createElement("button",{onClick:this.handleAccept},"Ok"),a.createElement("button",{onClick:this.handleCancel},"Cancel"))))},t}(a.Component),ve=Object(p.a)(me);function be(e){var t,n,r,o=e.tableData,a=o.columns,i=void 0===a?[]:a,l=o.metadata,c=void 0===l?[]:l,u=e.tableName,s=void 0===u?"":u,p=e.fkData,f=void 0===p?{}:p,d=f.entries,h=void 0===d?[]:d,y=f.metadata,m=void 0===y?[]:y,v={columns:ye(i.map((function(e,t){return he(he({},e),{metadata:c[t]||{}})}))),references:ye(h.map((function(e,t){return he(he({},e),{metadata:m[t]||{}})}))),name:s};return{name:v.name,columns:v.columns.map((function(e){var t,n,r,o,a,i;return{name:e.name,type:e.type,nonNull:e.nonNull,primary:e.pk,default:null===(n=null===(t=e)||void 0===t?void 0:t.metadata)||void 0===n?void 0:n.default,dimensions:null===(o=null===(r=e)||void 0===r?void 0:r.metadata)||void 0===o?void 0:o.dimensions,comment:null===(i=null===(a=e)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.comment}})),references:null===(r=null===(t=v.references)||void 0===t?void 0:(n=t).map)||void 0===r?void 0:r.call(n,(function(e){var t,n,r,o,a,i,l,c,u,s,p,f;return{name:e.name,columns:[e.columns],schemaRef:null===(t=e)||void 0===t?void 0:t.schemaRef,tableRef:e.tableRef,columnsRef:[e.columnsRef],onDelete:e.onDelete,match:null===(o=null===(r=null===(n=e)||void 0===n?void 0:n.metadata)||void 0===r?void 0:r.match)||void 0===o?void 0:o.value,deferrable:(l=null===(i=null===(a=e)||void 0===a?void 0:a.metadata)||void 0===i?void 0:i.deferrable,null!=l&&l),deferred:(s=null===(u=null===(c=e)||void 0===c?void 0:c.metadata)||void 0===u?void 0:u.deferred,null!=s&&s),comment:null===(f=null===(p=e)||void 0===p?void 0:p.metadata)||void 0===f?void 0:f.comment}}))}}function ge(e){var t,n,r,o={tableName:e.name,tableData:{columns:[],metadata:[]},fkData:{entries:[],metadata:[]}};return e.columns.forEach((function(e,t){o.tableData.columns[t]={name:e.name,type:e.type,nonNull:e.nonNull,pk:e.primary},o.tableData.metadata[t]={default:e.default,dimensions:e.dimensions,comment:e.comment}})),null===(r=null===(t=e.references)||void 0===t?void 0:(n=t).forEach)||void 0===r||r.call(n,(function(e,t){var n,r;o.fkData.entries[t]={name:e.name,columns:e.columns,schemaRef:e.schemaRef,tableRef:e.tableRef,columnsRef:e.columnsRef,onDelete:e.onDelete},o.fkData.metadata[t]={match:{label:e.match,value:e.match},deferrable:(n=e.deferrable,null!=n&&n),deferred:(r=e.deferred,null!=r&&r),comment:e.comment}})),o}var Oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTableClick=function(e){ve({initialValues:e}).then((function(e){e&&t.props.updateTable(e)}))},t}return Oe(t,e),t.prototype.render=function(){var e=this;return a.createElement("div",{style:{flex:1,height:"100%"}},a.createElement("div",{style:{height:40,background:"#ccc",display:"flex"}},a.createElement(s,{size:24,style:{padding:8}})," ",a.createElement("input",{type:"text",style:{border:"none",margin:"8px 0"}})),a.createElement("ul",{style:{listStyle:"none",padding:0}},this.props.tables.map((function(t){return a.createElement("li",{key:t.name,style:{display:"flex",alignItems:"center",cursor:"pointer"}},a.createElement("button",{style:{border:"none",display:"flex",justifyContent:"flex-start",alignItems:"center",flex:1},onClick:function(){return e.handleTableClick(t)}},a.createElement(u,{size:24})," ",t.name))}))))},t}(a.Component),we=Object(l.b)(c.g,(function(e){return{updateTable:function(t){return e(Object(c.i)(t))}}}))(Ce),xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=function(){return(Ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Pe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function l(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},_e=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},je=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleLoad=function(e){return Pe(t,void 0,void 0,(function(){var t,n,r,o,a,i,l=this;return _e(this,(function(c){return t=new FileReader,n=null===(r=e.target.files)||void 0===r?void 0:r[0],t.onloadend=function(){var e,n,r;null===(r=null===(e=l.props)||void 0===e?void 0:(n=e).onChange)||void 0===r||r.call(n,t.result)},t.readAsText(n),null===(i=null===(o=this.props.inputProps)||void 0===o?void 0:(a=o).onChange)||void 0===i||i.call(a,e),[2]}))}))},t}return xe(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.inputProps,r=e.labelProps,o=(e.onChange,je(e,["children","inputProps","labelProps","onChange"]));return a.createElement("button",Ee({},o),a.createElement("label",Ee({},r),t,a.createElement("input",Ee({type:"file",style:{display:"none"}},n,{onChange:this.handleLoad}))))},t}(a.Component),Se=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleAddTable=function(){ve().then((function(e){e&&t.props.addTable(e)}))},t.handleExportSQL=function(){t.props.exportSQL()},t.handleExporProject=function(){t.props.exportProject()},t.handleLoadProject=function(e){t.props.importProject(e)},t.handleAutoLayout=function(){t.props.autoLayout()},t}return Se(t,e),t.prototype.render=function(){return a.createElement("div",{style:{height:40,background:"#ccc",display:"flex"}},a.createElement("button",{style:{margin:1,fontSize:12,height:40,display:"flex",alignItems:"center"},onClick:this.handleAutoLayout},"Auto layout"),a.createElement("button",{style:{margin:1,fontSize:12,height:40,display:"flex",alignItems:"center"},onClick:this.handleAddTable},"Create table"),a.createElement("div",{style:{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"center"}},a.createElement(ke,{style:{margin:1,fontSize:12,height:40,display:"flex",alignItems:"center",alignSelf:"flex-end"},labelProps:{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center",width:"100%"}},onChange:this.handleLoadProject},"Open project"),a.createElement("button",{style:{margin:1,fontSize:12,height:40,display:"flex",alignItems:"center"},onClick:this.handleExporProject},"Export project"),a.createElement("button",{style:{margin:1,fontSize:12,height:40,display:"flex",alignItems:"center"},onClick:this.handleExportSQL},"Export SQL")))},t}(a.Component),Me=Object(l.b)((function(){return{}}),(function(e){return{addTable:function(t){return e(Object(c.i)(t))},exportSQL:function(){return e(Object(c.e)())},exportProject:function(){return e(Object(c.d)())},importProject:function(t){return e(Object(c.h)(t))},autoLayout:function(){return e(Object(c.b)())}}}))(Le),Re=n(208);function De(e){var t=Object(Re.a)();t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length-1;n+=1){var r=Math.min(8,Ae(e[n-1],e[n])/2,Ae(e[n],e[n+1])/2);t.arcTo(e[n].x,e[n].y,e[n+1].x,e[n+1].y,r)}var o=e[e.length-1];return t.lineTo(o.x,o.y),t.toString()}function Ae(e,t){return Math.hypot(e.x-t.x,e.y-t.y)}function Te(e){if(0===e.length)return"";var t="";return e[0].table.x1<e[1].table.x||e[0].table.x>e[1].table.x1?t=function(e){var t=e.map((function(e){return{x:e.fieldX,y:e.fieldY}}));t[0].x<t[1].x?(t[0].x+=e[0].table.width,e[0].x=t[0].x+9,e[1].x=t[1].x-9):(t[1].x+=e[1].table.width,e[1].x=t[1].x+9,e[0].x=t[0].x-9),t[0].y<t[1].y?(e[0].y=t[0].y-9,e[1].y=t[1].y+9):(e[1].y=t[1].y-9,e[0].y=t[0].y+9);var n=(t[0].x+t[1].x)/2;return De([t[0],{x:n,y:t[0].y},{x:n,y:t[1].y},t[1]])}(e):e[0].table.y1<e[1].table.y||e[0].table.y>e[1].table.y1||e[0].table===e[1].table?t=function(e){var t=e.map((function(e){return{x:e.fieldX+e.table.width,y:e.fieldY}})),n=Math.max.apply(Math,t.map((function(e){return e.x})))+10;return e[0].x=t[0].x+9,e[1].x=t[1].x+9,t[0].y<t[1].y?(e[0].y=t[0].y-9,e[1].y=t[1].y+9):(e[1].y=t[1].y-9,e[0].y=t[0].y+9),De([t[0],{x:n,y:t[0].y},{x:n,y:t[1].y},t[1]])}(e):e.forEach((function(e){e.x=e.fieldX+5,e.y=e.fieldY})),t}var Fe=function(e){return i.a.createElement("svg",{className:"field "+(e.primary?"primary-key":"")+" "+(e.highlight?"highlight-field":""),height:e.height,width:e.width,x:e.x,y:e.y},i.a.createElement("rect",{height:e.height,width:e.width}),i.a.createElement("text",{className:"field-name",x:e.padding||12,y:e.height/2,dy:".35em"},e.name),i.a.createElement("text",{className:"field-type",dy:".35em",x:e.width-(e.padding||12),y:e.height/2},e.type),i.a.createElement("title",null,e.name," (",e.type,")"))},Ne=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ie=function(){return(Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ue=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Ke=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r},Be=32,Xe=200;function Ye(e,t,n){void 0===t&&(t={}),void 0===n&&(n="Xk3TXkuMUNPZ5rhM");var r=window;if(r[n]||(r[n]={}),void 0!==r[n][e])return r[n][e];var o=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","text");Object.assign(a.style,t),o.appendChild(a),document.body.appendChild(o),a.textContent=e;var i=a.getComputedTextLength();return document.body.removeChild(o),r[n][e]=i,i}var He,ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={x:t.props.initialX,y:t.props.initialY,height:(t.props.rows.length+1)*Be+Be,width:Xe,hover:!1},t.coords={x:0,y:0},t.calculatedWidth=function(){var e=t.props.rows.map((function(e){return Ye(e.name)+24+32+Ye(e.type)})),n=Math.max.apply(Math,e);return n<Xe?Xe:n},t.positionChanged=function(){var e=t.props,n=e.onPositionChange,r=(e.beforePositionChange,e.onLastPositionChange,e.onHover,e.highlight,Ue(e,["onPositionChange","beforePositionChange","onLastPositionChange","onHover","highlight"]));n&&n(Ie(Ie({},t.state),{x1:t.state.width+t.state.x,y1:t.state.height+t.state.y}),r)},t.positionChangedLast=function(){var e=t.props,n=(e.onPositionChange,e.beforePositionChange,e.onLastPositionChange),r=(e.onHover,e.highlight,Ue(e,["onPositionChange","beforePositionChange","onLastPositionChange","onHover","highlight"]));n&&n(Ie(Ie({},t.state),{x1:t.state.width+t.state.x,y1:t.state.height+t.state.y}),r)},t.handleMouseOver=function(){t.setState((function(){return{hover:!0}}));var e=t.props,n=(e.onPositionChange,e.beforePositionChange,e.onHover),r=(e.highlight,Ue(e,["onPositionChange","beforePositionChange","onHover","highlight"]));n&&n(!0,r)},t.handleMouseOut=function(e){t.setState((function(){return{hover:!1}}));var n=t.props,r=(n.onPositionChange,n.beforePositionChange,n.onHover),o=(n.highlight,Ue(n,["onPositionChange","beforePositionChange","onHover","highlight"]));r&&r(!1,o)},t.handleMouseDown=function(e){e.stopPropagation(),t.coords={x:e.pageX,y:e.pageY},document.addEventListener("mousemove",t.handleMouseMove),document.addEventListener("mouseout",t.handleCheckMouseLeaveDocument);var n=t.props,r=(n.onPositionChange,n.beforePositionChange),o=(n.onHover,n.highlight,Ue(n,["onPositionChange","beforePositionChange","onHover","highlight"]));r&&r(Ie(Ie({},t.state),{x1:t.state.width+t.state.x,y1:t.state.height+t.state.y}),o)},t.handleCheckMouseLeaveDocument=function(e){(e.clientY<=0||e.clientX<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight)&&t.handleMouseUp(e)},t.handleMouseUp=function(e){e.stopPropagation(),document.removeEventListener("mousemove",t.handleMouseMove),document.removeEventListener("mouseout",t.handleCheckMouseLeaveDocument),t.coords={x:0,y:0},t.positionChangedLast()},t.handleMouseMove=function(e){e.stopPropagation();var n=t.coords.x-e.pageX,r=t.coords.y-e.pageY;t.coords.x=e.pageX,t.coords.y=e.pageY,t.setState({x:t.state.x-n,y:t.state.y-r},(function(){return t.positionChanged()}))},t}return Ne(t,e),t.prototype.componentDidMount=function(){this.setState({width:this.calculatedWidth()}),this.positionChanged()},t.prototype.componentWillUpdate=function(e,t){this.props.rows!==e.rows&&this.setState({width:this.calculatedWidth(),height:(this.props.rows.length+1)*Be+Be})},t.prototype.render=function(){var e=this.state,t=e.x,n=e.y,r=e.width,o=e.height,a=e.hover,l=this.props,c=l.rows,u=l.title,s=l.highlight,p=l.refs,f=s||a,d=(void 0===p?[]:p).reduce((function(e,t){var n=[];return t.relations[0].table===u&&(n=Ke(n,t.relations[0].rows)),t.relations[1].table===u&&(n=Ke(n,t.relations[1].rows)),n}),[]);return i.a.createElement("svg",{className:"table no-select",height:o,width:r,x:t,y:n,onMouseOver:this.handleMouseOver},i.a.createElement("svg",{className:"table-header",height:Be,width:r,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp},i.a.createElement("rect",{height:Be,width:r}),i.a.createElement("text",{className:"table-name",fontWeight:"bold",x:"13",y:"16",dy:".35em"},u),i.a.createElement("title",null,u)),c.map((function(e,t){return i.a.createElement(Fe,{key:t,highlight:d.indexOf(t)>-1&&f,x:0,y:Be+Be*t,name:e.name,type:e.type,primary:e.primary,height:Be,width:r})})))},t}(a.PureComponent),We=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=function(){return(Ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ge=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={x:0,y:0},t.coords={x:0,y:0},t.positionChanged=function(){var e=t.props.onPositionChange;e&&e(t.state)},t.handleMouseDown=function(e){t.coords={x:e.pageX,y:e.pageY},document.addEventListener("mousemove",t.handleMouseMove),document.addEventListener("mouseleave",t.handleCheckMouseLeaveDocument);var n=t.props.beforePositionChange;n&&n(t.state)},t.handleCheckMouseLeaveDocument=function(e){(e.clientY<=0||e.clientX<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight)&&t.handleMouseUp()},t.handleMouseUp=function(){document.removeEventListener("mousemove",t.handleMouseMove),document.removeEventListener("mouseleave",t.handleCheckMouseLeaveDocument),t.coords={x:0,y:0}},t.handleMouseMove=function(e){var n=t.coords.x-e.pageX,r=t.coords.y-e.pageY;t.coords.x=e.pageX,t.coords.y=e.pageY,t.setState({x:t.state.x-n,y:t.state.y-r},(function(){return t.positionChanged()}))},t}return We(t,e),t.prototype.render=function(){var e=this.state,t=e.x,n=e.y,r=this.props,o=r.height,a=r.width,l=r.children,c=Ge(r,["height","width","children"]);return i.a.createElement("svg",Ze({},c,{height:o,width:a,x:t,y:n,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),l)},t}(a.PureComponent),Je=function(e){var t=e.sectionSize,n=void 0===t?100:t,r=e.sectionColor,o=e.subsectionDivisor,a=void 0===o?10:o,l=e.subsectionColor,c=n/a;return i.a.createElement(i.a.Fragment,null,i.a.createElement("defs",null,i.a.createElement("pattern",{id:"smallGrid",width:"10",height:"10",patternUnits:"userSpaceOnUse"},i.a.createElement("path",{d:"M "+c+" 0 L 0 0 0 "+c,fill:"none",stroke:l||"#efefef",strokeWidth:"0.5"})),i.a.createElement("pattern",{id:"grid",width:"100",height:"100",patternUnits:"userSpaceOnUse"},i.a.createElement("rect",{width:"100",height:"100",fill:"url(#smallGrid)"}),i.a.createElement("path",{d:"M "+n+" 0 L 0 0 0 "+n,fill:"none",stroke:r||"#eaeaea",strokeWidth:"1"}))),i.a.createElement("rect",{width:"100%",height:"100%",fill:"#fff"}),i.a.createElement("rect",{width:"100%",height:"100%",fill:"url(#grid)",stroke:r||"#eaeaea",strokeWidth:"1"}))},Ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qe=function(){return(qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},$e=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r},et=32,tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={tableOrder:{},tablePositions:{},highlightRefs:[]},t.orderedTables=function(){return t.props.tables.sort((function(e,n){var r=t.state.tableOrder;return r[e.title]<r[n.title]?-1:1}))},t.bringToFront=function(e){var n=t.state.tableOrder;for(var r in n)n.hasOwnProperty(r)&&(n[r]=n[r]/t.props.tables.length);t.setState((function(n){var r;return{tableOrder:qe(qe({},n.tableOrder),(r={},r[e.title]=t.props.tables.length+1,r))}}))},t.handlePositionChange=function(e,n){t.setState((function(t){var r;return{tablePositions:qe(qe({},t.tablePositions),(r={},r[n.title]=e,r))}}))},t.handleLastPositionChange=function(e,n){var r,o,a;null===(a=(o=t.props).onPositionsChange)||void 0===a||a.call(o,((r={})[n.title]=e,r))},t.handleBeforePositionChange=function(e,n){t.bringToFront(n)},t.handleHover=function(e,n){t.setState((function(t){return{highlightRefs:e?n.refs:[]}}))},t}return Ve(t,e),t.prototype.componentDidMount=function(){var e={};this.props.tables.forEach((function(t,n){e[t.title]=n})),this.setState({tableOrder:e})},t.prototype.componentWillUpdate=function(e){if(this.props.tables!==e.tables){var t={};this.props.tables.forEach((function(e,n){t[e.title]=n})),this.setState({tableOrder:t})}},t.prototype.render=function(){var e=this,t=this.state,n=t.tablePositions,r=t.highlightRefs,o=void 0===r?[]:r,a=this.props,l=a.tables,c=a.zoom,u=void 0===c?100:c,s=this.orderedTables(),p=[],f=o.reduce((function(e,t){return $e(e,[t.name])}),[]),d=o.reduce((function(e,t){return $e(e,[t.relations[0].table,t.relations[1].table])}),[]);l.forEach((function(e){(e.refs||[]).forEach((function(t){if(2===t.relations.length){var r=t.relations[0],o=t.relations[1];if(e.title===r.table){var a=n[e.title],i=n[o.table];if(Boolean(a)&&Boolean(i)&&0!==r.rows.length&&0!==o.rows.length){var l=r.rows[r.rows.length-1],c=o.rows[o.rows.length-1],u=[{x:0,y:et+l*et+16,fieldX:a.x,fieldY:a.y+et+et*l+16,table:qe({},a)},{x:0,y:et+c*et+16,fieldX:i.x,fieldY:i.y+et+et*c+16,table:qe({},i)}];p.push({name:t.name,endpoints:u})}}}}))}));var h=Math.min(Math.max(u/100,.25),125),y="matrix("+h+", 0, 0, "+h+", "+1754*(1-h)+", "+1240*(1-h)+")";return i.a.createElement(Qe,{width:"2480px",height:"3508px",transform:y},i.a.createElement(Je,null),p.map((function(e){return i.a.createElement("g",{key:e.name,className:"ref "+(f.indexOf(e.name)>-1?"highlight-ref":"")},i.a.createElement("path",{className:"visible-path",d:Te(e.endpoints)}))})),s.map((function(t){return i.a.createElement(ze,{key:t.title+t.initialX+t.initialY,title:t.title,refs:t.refs,rows:t.rows,initialX:t.initialX,initialY:t.initialY,beforePositionChange:e.handleBeforePositionChange,onPositionChange:e.handlePositionChange,onLastPositionChange:e.handleLastPositionChange,onHover:e.handleHover,highlight:d.indexOf(t.title)>-1})})))},t}(a.PureComponent),nt=(n(530),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),rt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={zoom:100},t.handleZoomChange=function(e){t.setState({zoom:e.target.value})},t}return nt(t,e),t.prototype.render=function(){var e=this.props.tables;return i.a.createElement("div",{className:"Graph",style:{overflow:"auto",display:"flex",flexDirection:"column"}},i.a.createElement("div",{style:{background:"#f3f3f3"}},i.a.createElement("svg",{height:"calc(100vh - 200px)",width:"100%"},i.a.createElement(tt,{zoom:this.state.zoom,tables:e,onPositionsChange:this.props.onPositionChange}))),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},i.a.createElement("p",null,this.state.zoom,"%"),i.a.createElement("input",{className:"rs-range",style:{margin:24},type:"range",min:"25",max:"125",value:this.state.zoom,onChange:this.handleZoomChange})))},t}(a.PureComponent),ot=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),at=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ot(t,e),t.prototype.render=function(){var e=this.props,t=e.tables,n=e.tablePositions,r=e.updateTablePos,o=t.map((function(e,r){var o,a,i,l,c,u;return{title:e.name,rows:e.columns.map((function(e){return{name:e.name,type:e.type,primary:!!e.primary}})),initialX:(i=null===(a=null===(o=n)||void 0===o?void 0:o[e.name])||void 0===a?void 0:a.x,null!=i?i:100*r),initialY:(u=null===(c=null===(l=n)||void 0===l?void 0:l[e.name])||void 0===c?void 0:c.y,null!=u?u:100*r),refs:(e.references||[]).map((function(n){return{name:n.name,relationLabels:["*","*"],relations:[{table:e.name,rows:n.columns.map((function(n){return lt(t,He.Self,e.schemaName||"",e.name,n)}))},{table:n.tableRef,rows:n.columnsRef.map((function(e){return lt(t,He.Reference,n.schemaRef||"",n.tableRef,e)}))}]}}))}}));return i.a.createElement(rt,{tables:o,onPositionChange:function(e){return Object.keys(e).forEach((function(t){return r(t,e[t])}))}})},t}(i.a.Component),it=Object(l.b)(c.g,(function(e){return{updateTablePos:function(t,n){return e(c.a.updateTablePos(t,n))}}}))(at);function lt(e,t,n,r,o){var a=e.find((function(e){return(n||"").trim().length>0?n===e.schemaName&&e.name===r:e.name===r}));if(void 0===a||!a)return null;var i=a,l=(i.references||[]).find((function(e){return e[t].indexOf(o)>-1}));return void 0===l?null:(i.references||[]).indexOf(l)}!function(e){e.Self="columns",e.Reference="columnsRef"}(He||(He={}));var ct=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ut=function(){return(ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ct(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=e.style;return i.a.createElement("div",{className:n,style:ut({background:"#c3c3c3",color:"#535353",height:50,display:"flex",alignItems:"center"},r)},t)},t}(i.a.Component),pt=(n(531),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pt(t,e),t.prototype.render=function(){return a.createElement("div",{style:{height:"100vh",flex:1,display:"flex",flexDirection:"column"}},a.createElement(st,null,a.createElement("h2",{style:{margin:"12px",fontSize:18,lineHeight:"16px"}},"Tabua")),a.createElement("div",{style:{flex:1,display:"flex"}},a.createElement("div",{style:{flex:"0 0  200px",height:"100%",borderRight:"1px solid rgb(234, 234, 234)"}},a.createElement(we,null)),a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},a.createElement(Me,null),a.createElement(it,null))))},t}(a.Component);t.a=ft},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(85);var o=function(e){this.state=e};function a(e){var t,n,o=e.constructor.name,a={},i={};return Reflect.ownKeys(Reflect.getPrototypeOf(e)).concat(Reflect.ownKeys(e)).forEach((function(t){if("constructor"!==t){var n=o+"."+t;"function"==typeof e[t]&&(a[n]=function(n,r){var o=new e.constructor(n);return o[t].apply(o,r.payload),n},i[t]=function(){var e={type:n,payload:Array.from(arguments)};return e})}})),[(t=e.state,n=a,function(e,o){void 0===e&&(e=t);var a=n[o.type];return a?Object(r.a)(e,(function(e){return a(e,o)})):e}),i]}},530:function(e,t,n){},531:function(e,t,n){},538:function(e,t,n){"use strict";n.r(t);var r,o,a,i=n(0),l=n(21),c=n(17),u=n(9),s=n(43),p=(n(216),function(e){return function(e){return function(t){return console.log(t),e(t)}}}),f=n(199),d=n(85),h=n(22),y=n(24),m=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sayHi=function(e){t.state.phrase=e},t}return m(t,e),t}(h.a),b=(Object(y.a)((function(e){return e.menu}),(function(e){return e.items})),(o=Object(h.b)(new v({items:[]})))[0]),g=(o[1],function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),O=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,l=a.length;i<l;i++,o++)r[o]=a[i];return r},C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addItem=function(e){return t.state.items=O(t.state.items,[e]),t.state},t}return g(t,e),t}(h.a),w=(Object(y.a)((function(e){return e.hen.items}),(function(e){return{items:e}})),(a=Object(h.b)(new C({items:[],data:{}})))[0]),x=(a[1],w),E=n(6),P=Object(f.a)(d.a,{menu:b,hen:x,editor:E.c}),_=n(200);var j,k,S=n(206),L=n(201),M=(Object(u.a)(),k=Object(s.applyMiddleware)(p,_.a),Object(s.createStore)(P,j,k));l.render(i.createElement(c.a,{store:M},i.createElement(S.a,null,i.createElement(L.a,null))),document.getElementById("root"))},6:function(e,t,n){"use strict";var r=n(22);function o(e,t,n){void 0===t&&(t="text/plain");var r=window.document.createElement("a");r.href=window.URL.createObjectURL(new Blob(n,{type:t})),r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}var a=n(24);function i(e){var t,n=e.columns.filter((function(e){return e.primary})),r=n.length>0,o=null!=(t=e.references)?t:[],a=o.length>0;return"\nCREATE TABLE "+l(e.name)+" (\n    "+e.columns.map((function(e){return l(e.name)+" "+l(e.type)+function(e,t,n){var r,o=function(e,t){return e?"("+e+")":""};return(null!=(r={bit:o,char:o,decimal:function(e,t){return e?"("+e+(t?","+t:"")+")":""},interval:o,time:o,timetz:o,timestamp:o,timestamptz:o,varbit:o,varchar:o}[e])?r:function(e,t){return""})(t,n)}(e.name,e.length,e.decimals)+" "+(e.nonNull?"NOT NULL":"")+" "+(e.default?"DEFAULT "+e.default:"")+(t=e.dimensions,Array(null!=t?t:0).fill("[]"));var t})).concat(r?["PRIMARY KEY ("+n.map((function(e){return l(e.name)}))+")"]:[]).concat(a?o.map((function(e){return(e.name?"CONSTRAINT "+l(e.name):"")+" FOREIGN KEY ("+e.columns.map((function(e){return l(e)})).join(",")+") REFERENCES "+(e.schemaRef?l(e.schemaRef)+".":"")+l(e.tableRef)+" ("+e.columnsRef.map((function(e){return l(e)})).join(",")+") "+(e.match?"MATCH FULL":"")+" "+(e.onDelete?"ON DELETE "+e.onDelete:"")+" "+(e.onUpdate?"ON UPDATE "+e.onUpdate:"")+" "+(e.deferrable?"DEFERRABLE":"")+" "+(e.deferred?"INITIALLY DEFERRED":"")})):[]).join(",\r\n\t")+"\n)\n"+(e.hasOids?"":"WITHOUT OIDS;")+"\n\n"+(e.comment?"COMMENT ON TABLE "+l(e.name)+" IS '"+e.comment+"';":"")+"\n"+e.columns.map((function(t){return t.comment?"COMMENT ON COLUMN  "+l(e.name)+"."+l(t.name)+" IS '"+t.comment+"';\n":""})).filter((function(e){return!!e})).join("\r\n\t")+"\n"}function l(e){return'"'+e+'"'}var c=n(124),u=n.n(c);n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return C})),n.d(t,"i",(function(){return w})),n.d(t,"e",(function(){return x})),n.d(t,"d",(function(){return E})),n.d(t,"h",(function(){return P})),n.d(t,"b",(function(){return _}));var s,p,f,d=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.Success="success",e.Error="error"}(f||(f={}));var y=function(e){return e.editor},m=Object(a.a)(y,(function(e){return{tables:e.tables,tableList:Object.keys(e.tables).map((function(t){return e.tables[t]})),tablePositions:e.tablePositions}})),v=Object(a.a)(m,(function(e){return{tables:e.tableList,tablePositions:e.tablePositions}})),b=Object(a.a)(m,(function(e){return{tables:e.tableList,availableTables:e.tableList.map((function(e){return e.name})),availableTableColumns:e.tableList.reduce((function(e,t){return e[t.name]=t.columns.map((function(e){return e.name})),e}),{})}})),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.pushAlert=function(e){this.state.alerts.push()},t.prototype.removeTable=function(e){delete this.state.tables[e]},t.prototype.updateTable=function(e,t){this.state.tables[e]=t},t.prototype.projectImported=function(e){var t=this;e.forEach((function(e){t.state.tables[e.name]=e}))},t.prototype.updateTablePos=function(e,t){this.state.tablePositions[e]=t},t.prototype.updateAllTablePos=function(e){this.state.tablePositions=e},t}(r.a),O=(p=Object(r.b)(new g({alerts:[],tables:{user:{columns:[{name:"user_id",type:"uuid",nonNull:!0,primary:1},{name:"addr_id",type:"int8",nonNull:!0}],name:"user",references:[{name:"addr_id_fk",columns:["addr_id"],tableRef:"address",columnsRef:["addr_id"],deferrable:!1,deferred:!1}]},address:{columns:[{name:"addr_id",type:"serial8",nonNull:!0,primary:1}],name:"address"}},tablePositions:{user:{x:20,y:100},address:{x:200,y:100}}})))[0],C=p[1];t.c=O;function w(e){return function(t,n){var r=n();y(r).tables[e.name]&&t(C.pushAlert({status:f.Success,message:""})),t(C.updateTable(e.name,e))}}function x(){return function(e,t){var n=t();o("export.sql","application/sql",[v(n).tables.map((function(e){return i(e)})).join("\r\n")])}}function E(){return function(e,t){var n=t(),r={tables:v(n).tables,version:"v1"};o("export.tabua","application/json",[JSON.stringify(r)])}}function P(e){return function(t,n){try{var r=JSON.parse(e);t(C.projectImported(r.tables))}catch(e){}}}function _(){return function(e,t){var n=t().editor.tables,r=t().editor.tablePositions,o=new u.a.graphlib.Graph;o.setGraph({}),o.setDefaultEdgeLabel((function(){return{}})),Object.keys(n).forEach((function(e){var t,n,a,i,l=r[e];console.log("--\x3e new node",e,l),o.setNode(e,{label:e,width:(n=null===(t=l)||void 0===t?void 0:t.width,null!=n?n:200),height:(i=null===(a=l)||void 0===a?void 0:a.height,null!=i?i:50)})})),Object.keys(n).forEach((function(e){var t;null===(t=n[e].references)||void 0===t||t.forEach((function(t){o.setEdge(e,t.tableRef)}))})),u.a.layout(o);var a=h({},r);o.nodes().forEach((function(e){var t=o.node(e);console.log("--\x3e",e,o),a[e]=h(h({},a[e]),{x:t.x,y:t.y})})),e(C.updateAllTablePos(a))}}}},[[538,1,2]]]);